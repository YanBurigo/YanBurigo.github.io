<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <link rel="shortcut icon" href="assets/favicon.png" />
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algoritmo Genético</title>
    <link rel='stylesheet' type='text/css' media='screen' href='styles/style.css'>
    <script src='scripts/Main.js'></script>
    <script src='scripts/AlgoritmoGenetico.js'></script>
    <script src='scripts/Metodos.js'></script>
    <script src='scripts/Avaliacao.js'></script>

    
</head>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
<body>

    <div id="ag" class="main">

        <table class="table table-bordered table-success">
    
        <tbody>

        </tr>
        <td>Fases</td>
        <td>HRS</td>
        <td>Segunda-Feira</td>
        <td>Terça-Feira</td>
        <td>Quarta-Feira</td>
        <td>Quinta-Feira</td>
        <td>Sexta-Feira</td>
    </tr>
    <tr>

        <td>2° Fase</td>
        <td>8hrs-10hrs
            <p></p>
            <p>10hrs-12hrs</p>
        <td>{{ getMateria(0) }}
            <p></p>
            <p>{{ getMateria(1) }}</p>
        </td>
        <td>{{ getMateria(2) }}
            <p></p>
            <p>{{ getMateria(3) }}</p>
        </td>
        <td>{{ getMateria(4) }}
            <p></p>
            <p>{{ getMateria(5) }}</p>
        </td>
        <td>{{ getMateria(6) }}
            <p></p>
            <p>{{ getMateria(7) }}</p>
        </td>
        <td>{{ getMateria(8) }}
            <p></p>
            <p>{{ getMateria(9) }}</p>
        </td>
        </td>
    </tr>

    <tr>

        <td>4° Fase</td>
        <td>8hrs-10hrs
            <p></p>
            <p>10hrs-12hrs</p>
            <td>{{ getMateria(10) }}
                <p></p>
                <p>{{ getMateria(11) }}</p>
            </td>
            <td>{{ getMateria(12) }}
                <p></p>
                <p>{{ getMateria(13) }}</p>
            </td>
            <td>{{ getMateria(14) }}
                <p></p>
                <p>{{ getMateria(15) }}</p>
            </td>
            <td>{{ getMateria(16) }}
                <p></p>
                <p>{{ getMateria(17) }}</p>
            </td>
            <td>{{ getMateria(18) }}
                <p></p>
                <p>{{ getMateria(19) }}</p>

    </tr>
    <tr>

        <td>6° Fase</td>
        <td>8hrs-10hrs
            <p></p>
            <p>10hrs-12hrs</p>
            <td>{{ getMateria(20) }}
                <p></p>
                <p>{{ getMateria(21) }}</p>
            </td>
            <td>{{ getMateria(22) }}
                <p></p>
                <p>{{ getMateria(23) }}</p>
            </td>
            <td>{{ getMateria(24) }}
                <p></p>
                <p>{{ getMateria(25) }}</p>
            </td>
            <td>{{ getMateria(26) }}
                <p></p>
                <p>{{ getMateria(27) }}</p>
            </td>
            <td>{{ getMateria(28) }}
                <p></p>
                <p>{{ getMateria(29) }}</p>

    </tr>
    <tr>

        <td>8° Fase</td>
        <td>8hrs-10hrs
            <p></p>
            <p>10hrs-12hrs</p>
            <td>{{ getMateria(30) }}
                <p></p>
                <p>{{ getMateria(31) }}</p>
            </td>
            <td>{{ getMateria(32) }}
                <p></p>
                <p>{{ getMateria(33) }}</p>
            </td>
            <td>{{ getMateria(34) }}
                <p></p>
                <p>{{ getMateria(35) }}</p>
            </td>
            <td>{{ getMateria(36) }}
                <p></p>
                <p>{{ getMateria(37) }}</p>
            </td>
            <td>{{ getMateria(38) }}
                <p></p>
                <p>{{ getMateria(39) }}</p>

        

        </tbody>
        </table>
<div id="box">
    <div class="escolhas">
        <button onclick="Executar()">Procurar por solução</button>
    </div>
    <div class="escolhas">
        <label for="num" style="color: black;">Escolha o tamanho da população:</label>
        <select name="Populacao" id="populacao">
        <option value="50">50</option>
        <option value="100">100</option>
        </select>
    </div>

    <div class="escolhas">
        <label for="num" style="color: black;">Escolha a probabilidade de mutação:</label>
        <select name="Mutacao" id="mutacao">
        <option value="10">10</option>
        <option value="20">20</option>
        </select>
    </div>
</div>
    <div>
        <div class="results">
            <h6>Resultado: {{ getPontuacao() }}</h6>
        </div>
        <div class="results">
            <h6>Tempo: {{ getTime() }}</h6>
        </div>
        <div class="results">
            <h6>Gerações: {{ getGeracoes() }}</h6>
        </div>
    </div>
    </div>

    
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <script>
        
        let app = new Vue({
            el: "#ag",
            data:{
                materia: [{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},
                {msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},
                {msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},
                {msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""},{msg:""}],
                pontuacao: "",
                time: "",
                geracoes: ""
            },
            methods:{
                setMateria(value, index){
                    this.materia[index].msg = value;
                },
                getMateria(index){
                    return this.materia[index].msg;
                },
                setPontuacao(value){
                    this.pontuacao = value + " pontos";
                },
                getPontuacao(){
                    return this.pontuacao;
                },
                setTime(value){
                    this.time = value + " segundos";
                },
                getTime(){
                    return this.time;
                },
                setGeracoes(value){
                    this.geracoes = value + " gerações";
                },
                getGeracoes(){
                    return this.geracoes;
                }
            } 
        })

    </script>




    <script>
        var dados;
        var retorno = [];
        var tempo = 0;
        fetch("data/populacao.json")
            .then(response => {
                return response.json();
            })
            .then(data => dados = data);
        function Executar(){
            var select = document.getElementById('populacao');
            var valuePop = select.options[select.selectedIndex].value;
            
            select = document.getElementById('mutacao');
            var valueMut = select.options[select.selectedIndex].value;

            var populacao = [];
            for(var i=0; i<valuePop; i++){
                populacao[i]=dados[i].individuo;
            }

            var d = new Date();
            var n = d.getTime();
            tempo = n;
            retorno = main(populacao, valueMut);
            
            d = new Date();
            n = d.getTime();
            tempo = (n - tempo)/1000;
            app.setTime(tempo);
            app.setGeracoes(getGeracoes());
            for(var i=0; i<40; i++){
                for(var j=0; j<20; j++){
                    if(retorno[i]==content[j].id){
                        app.setMateria(content[j].disciplina + " - " + content[j].professor, i)
                    }
                }
            }
            app.setPontuacao(getMelhorPontuacao()[0]);
        }
        
    </script>
</body>
</html>