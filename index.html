<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IA</title>
    <link rel="shortcut icon" href="assets/favicon.png" />
    <link rel="stylesheet" type="text/css" href="styles/style.css" />
  </head>
  <body>
    <div id="IA">
      <!--matriz contendo todos os caminhos possiveis de passar-->
      <div style="float: left">
        <div class="quad" id="1"></div>
        <div class="quad" style="background-color: gray" id="2">1</div>
        <div class="quad" style="background-color: gray" id="3">2</div>
        <div class="quad" style="background-color: gray" id="4">3</div>
        <div class="quad" style="background-color: gray" id="5">4</div>
        <div class="quad" style="background-color: gray" id="6">5</div>
        <div class="quad" style="background-color: gray" id="7">6</div>
        <div class="quad" style="background-color: gray" id="8">7</div>
        <div class="quad" style="background-color: gray" id="9">8</div>
        <div class="quad" style="background-color: gray" id="10">9</div>
        <div class="quad" style="background-color: gray" id="11">10</div>
        <div class="quad" id="12"></div>
        <div class="quad" style="background-color: red" id="181"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="13"></div>
        <div class="quad" id="14"></div>
        <div class="quad" id="15"></div>
        <div class="quad" id="16"></div>
        <div class="quad" id="17"></div>
        <div class="quad" id="18"></div>
        <div class="quad" id="19"></div>
        <div class="quad" id="20"></div>
        <div class="quad" id="21"></div>
        <div class="quad" id="22"></div>
        <div class="quad" id="23"></div>
        <div class="quad" id="24"></div>
        <div class="quad" style="background-color: red" id="182"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="25"></div>
        <div class="quad" style="background-color: gray" id="26">11</div>
        <div class="quad" style="background-color: gray" id="27">12</div>
        <div class="quad" style="background-color: gray" id="28">13</div>
        <div class="quad" style="background-color: gray" id="29">14</div>
        <div class="quad" style="background-color: gray" id="30">15</div>
        <div class="quad" style="background-color: gray" id="31">16</div>
        <div class="quad" style="background-color: gray" id="32">17</div>
        <div class="quad" style="background-color: gray" id="33">18</div>
        <div class="quad" style="background-color: gray" id="34">19</div>
        <div class="quad" style="background-color: gray" id="35">20</div>
        <div class="quad" id="36"></div>
        <div class="quad" style="background-color: red" id="183"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="37"></div>
        <div class="quad" style="background-color: gray" id="38">31</div>
        <div class="quad" style="background-color: gray" id="39">32</div>
        <div class="quad" style="background-color: gray" id="40">33</div>
        <div class="quad" style="background-color: gray" id="41">34</div>
        <div class="quad" style="background-color: gray" id="42">35</div>
        <div class="quad" style="background-color: gray" id="43">36</div>
        <div class="quad" style="background-color: gray" id="44">37</div>
        <div class="quad" style="background-color: gray" id="45">38</div>
        <div class="quad" style="background-color: gray" id="46">39</div>
        <div class="quad" style="background-color: gray" id="47">40</div>
        <div class="quad" id="48"></div>
        <div class="quad" style="background-color: red" id="184"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="49"></div>
        <div class="quad" id="50"></div>
        <div class="quad" id="51"></div>
        <div class="quad" id="52"></div>
        <div class="quad" id="53"></div>
        <div class="quad" id="54"></div>
        <div class="quad" id="55"></div>
        <div class="quad" id="56"></div>
        <div class="quad" id="57"></div>
        <div class="quad" id="58"></div>
        <div class="quad" id="59"></div>
        <div class="quad" id="60"></div>
        <div class="quad" style="background-color: red" id="185"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="61"></div>
        <div class="quad" style="background-color: gray" id="62">41</div>
        <div class="quad" style="background-color: gray" id="63">42</div>
        <div class="quad" style="background-color: gray" id="64">43</div>
        <div class="quad" style="background-color: gray" id="65">44</div>
        <div class="quad" style="background-color: gray" id="66">45</div>
        <div class="quad" style="background-color: gray" id="67">46</div>
        <div class="quad" style="background-color: gray" id="68">47</div>
        <div class="quad" style="background-color: gray" id="69">48</div>
        <div class="quad" style="background-color: gray" id="70">49</div>
        <div class="quad" style="background-color: gray" id="71">50</div>
        <div class="quad" id="72"></div>
        <div class="quad" style="background-color: grey" id="186"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="73"></div>
        <div class="quad" style="background-color: gray" id="74">51</div>
        <div class="quad" style="background-color: gray" id="75">52</div>
        <div class="quad" style="background-color: gray" id="76">53</div>
        <div class="quad" style="background-color: gray" id="77">54</div>
        <div class="quad" style="background-color: gray" id="78">55</div>
        <div class="quad" style="background-color: gray" id="79">56</div>
        <div class="quad" style="background-color: gray" id="80">57</div>
        <div class="quad" style="background-color: gray" id="81">58</div>
        <div class="quad" style="background-color: gray" id="82">59</div>
        <div class="quad" style="background-color: gray" id="83">60</div>
        <div class="quad" id="84"></div>
        <div class="quad" style="background-color: grey" id="187"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="85"></div>
        <div class="quad" id="86"></div>
        <div class="quad" id="87"></div>
        <div class="quad" id="88"></div>
        <div class="quad" id="89"></div>
        <div class="quad" id="90"></div>
        <div class="quad" id="91"></div>
        <div class="quad" id="92"></div>
        <div class="quad" id="93"></div>
        <div class="quad" id="94"></div>
        <div class="quad" id="95"></div>
        <div class="quad" id="96"></div>
        <div class="quad" style="background-color: grey" id="188"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="97"></div>
        <div class="quad" style="background-color: gray" id="98">61</div>
        <div class="quad" style="background-color: gray" id="99">62</div>
        <div class="quad" style="background-color: gray" id="100">63</div>
        <div class="quad" style="background-color: gray" id="101">64</div>
        <div class="quad" style="background-color: gray" id="102">65</div>
        <div class="quad" style="background-color: gray" id="103">66</div>
        <div class="quad" style="background-color: gray" id="104">67</div>
        <div class="quad" style="background-color: gray" id="105">68</div>
        <div class="quad" style="background-color: gray" id="106">69</div>
        <div class="quad" style="background-color: gray" id="107">70</div>
        <div class="quad" id="108"></div>
        <div class="quad" style="background-color: grey" id="189"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="109"></div>
        <div class="quad" style="background-color: gray" id="110">71</div>
        <div class="quad" style="background-color: gray" id="111">72</div>
        <div class="quad" style="background-color: gray" id="112">73</div>
        <div class="quad" style="background-color: gray" id="113">74</div>
        <div class="quad" style="background-color: gray" id="114">75</div>
        <div class="quad" style="background-color: gray" id="115">76</div>
        <div class="quad" style="background-color: gray" id="116">77</div>
        <div class="quad" style="background-color: gray" id="117">78</div>
        <div class="quad" style="background-color: gray" id="118">79</div>
        <div class="quad" style="background-color: gray" id="119">80</div>
        <div class="quad" id="120"></div>
        <div class="quad" style="background-color: grey" id="190"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="121"></div>
        <div class="quad" id="122"></div>
        <div class="quad" id="123"></div>
        <div class="quad" id="124"></div>
        <div class="quad" id="125"></div>
        <div class="quad" id="126"></div>
        <div class="quad" id="127"></div>
        <div class="quad" id="128"></div>
        <div class="quad" id="129"></div>
        <div class="quad" id="130"></div>
        <div class="quad" id="131"></div>
        <div class="quad" id="132"></div>
        <div class="quad" style="background-color: grey" id="191"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="133"></div>
        <div class="quad" style="background-color: gray" id="134">81</div>
        <div class="quad" style="background-color: gray" id="135">82</div>
        <div class="quad" style="background-color: gray" id="136">83</div>
        <div class="quad" style="background-color: gray" id="137">84</div>
        <div class="quad" style="background-color: gray" id="138">85</div>
        <div class="quad" style="background-color: gray" id="139">86</div>
        <div class="quad" style="background-color: gray" id="140">87</div>
        <div class="quad" style="background-color: gray" id="141">88</div>
        <div class="quad" style="background-color: gray" id="142">89</div>
        <div class="quad" style="background-color: gray" id="143">90</div>
        <div class="quad" id="144"></div>
        <div class="quad" style="background-color: grey" id="192"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="145"></div>
        <div class="quad" style="background-color: gray" id="146">91</div>
        <div class="quad" style="background-color: gray" id="147">92</div>
        <div class="quad" style="background-color: gray" id="148">93</div>
        <div class="quad" style="background-color: gray" id="149">94</div>
        <div class="quad" style="background-color: gray" id="150">95</div>
        <div class="quad" style="background-color: gray" id="151">96</div>
        <div class="quad" style="background-color: gray" id="152">97</div>
        <div class="quad" style="background-color: gray" id="153">98</div>
        <div class="quad" style="background-color: gray" id="154">99</div>
        <div class="quad" style="background-color: gray" id="155">100</div>
        <div class="quad" id="156"></div>
        <div class="quad" style="background-color: grey" id="193"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="157"></div>
        <div class="quad" id="158"></div>
        <div class="quad" id="159"></div>
        <div class="quad" id="160"></div>
        <div class="quad" id="161"></div>
        <div class="quad" id="162"></div>
        <div class="quad" id="163"></div>
        <div class="quad" id="164"></div>
        <div class="quad" id="165"></div>
        <div class="quad" id="166"></div>
        <div class="quad" id="167"></div>
        <div class="quad" id="168"></div>
        <div class="quad" style="background-color: grey" id="194"></div>
      </div>
      <div style="float: left">
        <div class="quad" id="169"></div>
        <div class="quad" style="background-color: gray" id="170">101</div>
        <div class="quad" style="background-color: gray" id="171">102</div>
        <div class="quad" style="background-color: gray" id="172">103</div>
        <div class="quad" style="background-color: gray" id="173">104</div>
        <div class="quad" style="background-color: gray" id="174">105</div>
        <div class="quad" style="background-color: gray" id="175">106</div>
        <div class="quad" style="background-color: gray" id="176">107</div>
        <div class="quad" style="background-color: gray" id="177">108</div>
        <div class="quad" style="background-color: gray" id="178">109</div>
        <div class="quad" style="background-color: gray" id="179">110</div>
        <div class="quad" style="background-color: green;" id="180">X</div>
        <div class="quad" style="background-color: grey" id="195"></div>
      </div>
      <div>
        <p style="visibility: collapse; height: 1000px;float: left">spa</p>
      </div>
      <div>
        <div>
          <p style="visibility: collapse; height: 1px;">spacer</p>
          <label for="num" style="color: white;">Escolha o algoritmo:</label>
          <select name="Algoritmo" id="algoritmo">
            <option value="arvore">Busca em Árvore</option>
            <option value="grafo">Busca em Grafo</option>
          </select>
        </div>
        <div>
          <p style="visibility: collapse; height: 1px;">spacer</p>
          <label for="num" style="color: white; padding-right: 16px;">Escolha o destino:</label>
          <input type="text" id="destino" name="num" style="width: 117px;"><br><br>
        </div>
        <div>
          <button @click="trocarCor()" style="padding-left: 110px; padding-right: 110px;">Buscar</button>
        </div>
        <div>
          <p style="visibility: collapse; height: 1px;">spacer</p>
          <label for="num" style="color: white;">Velocidade:</label>
          <select name="Velocidade" id="velocidade">
            <option value="1000">0.5x</option>
            <option selected value="500">1x</option>
            <option value="250">1.5x</option>
            <option value="100">2x</option>
          </select>
        </div>
      </div>  
    </div>

    <script type="text/javascript" src="scripts/busca.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
      //instancia do vue, para deixar a pagina reativa sem a necessidade de ficar atualizando
      let app = new Vue({
        el: "#IA",
        //dados do vue
        //o K é responsável por converter a escolha do usuário em uma posição da matriz de caminhos
        //já os r1, r2, r3, r4 e r5 são os robos, cada um tem o seu nodo inicial e posição inicial da matriz
        data: {
          k: [[1,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],
          [11,26],[12,27],[13,28],[14,29],[15,30],[16,31],[17,32],[18,33],[19,34],[20,35],
          [31,38],[32,39],[33,40],[34,41],[35,42],[36,43],[37,44],[38,45],[39,46],[40,47],
          [41,62],[42,63],[43,64],[44,65],[45,66],[46,67],[47,68],[48,69],[49,70],[50,71],
          [51,74],[52,75],[53,76],[54,77],[55,78],[56,79],[57,80],[58,81],[59,82],[60,83],
          [61,98],[62,99],[63,100],[64,101],[65,102],[66,103],[67,104],[68,105],[69,106],[70,107],
          [71,110],[72,111],[73,112],[74,113],[75,114],[76,115],[77,116],[78,117],[79,118],[80,119],
          [81,134],[82,135],[83,136],[84,137],[85,138],[86,139],[87,140],[88,141],[89,142],[90,143],
          [91,146],[92,147],[93,148],[94,149],[95,150],[96,151],[97,152],[98,153],[99,154],[100,155],
          [101,170],[102,171],[103,172],[104,173],[105,174],[106,175],[107,176],[108,177],[109,178],[110,179]],
          r1: ["p12",181],
          r2: ["p24",182],
          r3: ["p36",183],
          r4: ["p48",184],
          r5: ["p60",185],
        },
        //metodos do vue
        methods: {
          trocarCor() {
            //as duas primeiras linha são responsáveis por pegar a escolha de velocidade, já a terceira é responsável por pegar a escolha de destino
            var selects = document.getElementById('velocidade');
            var vel = selects.options[selects.selectedIndex].value;
            var escolha = document.getElementById('destino').value;
            var destino=-1;
            //esse for converte o destino escolhido em uma posição da matriz usando a váriavel K
            for(var u=0; u<100;u++){
              if(this.k[u][0]==escolha){
                destino=this.k[u][1];
              }
            }
            //caso o destino informado seja um número correto, irá começar a execução do algoritmo do front
            if(destino!=-1){
              //aqui pega a escolha do tipo de busca e chamará ela para cada um dos cinco robos
              var select = document.getElementById('algoritmo');
              var value = select.options[select.selectedIndex].value;

              //aqui irá gravar a posição da matriz de cada robo no cache do navegador para ser usado no método setInterval(), pois ele não consegue ler os dados do Vue
              localStorage.setItem("r1",this.r1[1])
              localStorage.setItem("r2",this.r2[1])
              localStorage.setItem("r3",this.r3[1])
              localStorage.setItem("r4",this.r4[1])
              localStorage.setItem("r5",this.r5[1])
              //aqui começa a definir qual robo irá buscar
              var escolhaRobo
              //esses primeiros ifs são responsáveis por ver se o robo já está na estante escolhida, se já estiver, ele será escolhido
              if(destino==this.r1[1]){
                escolhaRobo=1;
              }
              else if(destino==this.r2[1]){
                escolhaRobo=2
              }
              else if(destino==this.r3[1]){
                escolhaRobo=3
              }
              else if(destino==this.r4[1]){
                escolhaRobo=4
              }
              else if(destino==this.r5[1]){
                escolhaRobo=5
              }
              else{
                //caso nenhum robo esteja na estante, é sorteado um robo para buscar
                escolhaRobo = getProxCaminho(1, 6)
              }
              if(escolhaRobo==1){
                //o robo escolhido irá verificar qual foi algoritmo escolhido
                if(value=="arvore"){
                  var robot1 = buscaArvore(this.r1[0],destino)
                }
                else{
                  //caso não encontre um caminho na busca por grafo, 
                  while(true){
                    var robot1 = buscaGrafo(this.r1[0],destino)
                    if(robot1[0]!=-1){
                      break;
                    }
                  }
                }
                //a variável cam recebe o caminho do robo escolhido
                var cam = robot1;
                alert("Quantidades de movimentos necessários: " + cam.length);
                //a variável r1[0] irá receber a penultima posição do cam e irá adicionar a letra P na frente
                this.r1[0]="p"+cam[cam.length-2];
                //caso a posição inicial do r1 seja igual o destino, então irá remover essa posição, para que o caminho não fique repetido
                if(this.r1[1]==destino){
                  cam.shift();
                }
                //a variável r1[1] receberá a ultima posição do caminho
                this.r1[1]=cam[cam.length-1];
                //irá atualizar o valor de r1 no cache
                localStorage.setItem("r1",this.r1[1])
              }
              else if(escolhaRobo==2){
                if(value=="arvore"){
                  var robot2 = buscaArvore(this.r2[0],destino)
                }
                else{
                  while(true){
                    var robot2 = buscaGrafo(this.r2[0],destino)
                    if(robot2[0]!=-1){
                      break;
                    }
                  }
                }
                var cam = robot2;
                alert("Quantidades de movimentos necessários: " + cam.length);
                this.r2[0]="p"+cam[cam.length-2];
                if(this.r2[1]==destino){
                  cam.shift();
                }
                this.r2[1]=cam[cam.length-1];
                localStorage.setItem("r2",this.r2[1])
              }
              else if(escolhaRobo==3){
                if(value=="arvore"){
                  var robot3 = buscaArvore(this.r3[0],destino)
                }
                else{
                  while(true){
                    var robot3 = buscaGrafo(this.r3[0],destino)
                    if(robot3[0]!=-1){
                      break;
                    }
                  } 
                }
                var cam = robot3;
                alert("Quantidades de movimentos necessários: " + cam.length);
                this.r3[0]="p"+cam[cam.length-2];
                if(this.r3[1]==destino){
                  cam.shift();
                }
                this.r3[1]=cam[cam.length-1];
                localStorage.setItem("r3",this.r3[1])
              }
              else if(escolhaRobo==4){
                if(value=="arvore"){
                  var robot4 = buscaArvore(this.r4[0],destino)
                }
                else{
                  while(true){
                    var robot4 = buscaGrafo(this.r4[0],destino)
                    if(robot4[0]!=-1){
                      break;
                    }
                  }
                }
                var cam = robot4;
                alert("Quantidades de movimentos necessários: " + cam.length);
                this.r4[0]="p"+cam[cam.length-2];
                if(this.r4[1]==destino){
                  cam.shift();
                }
                this.r4[1]=cam[cam.length-1];
                localStorage.setItem("r4",this.r4[1])
              }
              else{
                if(value=="arvore"){
                  var robot5 = buscaArvore(this.r5[0],destino)
                }
                else{
                  while(true){
                    var robot5 = buscaGrafo(this.r5[0],destino)
                    if(robot5[0]!=-1){
                      break;
                    }
                  }  
                }
                var cam = robot5;
                  alert("Quantidades de movimentos necessários: " + cam.length);
                  this.r5[0]="p"+cam[cam.length-2];
                  if(this.r5[1]==destino){
                    cam.shift();
                  }
                  this.r5[1]=cam[cam.length-1];
                  localStorage.setItem("r5",this.r5[1])
              }

              var i=0
              //O método setInterval() é responsável por executar o código de tempo em tempo
              //esse método irá pintar todos os quadrados do front com sua cor original e depois irá pintar a posição do vetor retornado pela busca de vermelho, fazendo com que o robo se movimente pela tela
              var intervalo = setInterval(() => {

                for(var j=1; j<=185; j++){
                  if((j>=2 && j<=11)||(j>=26 && j<=35)||(j>=38 && j<=47)||(j>=62 && j<=71)||(j>=74 && j<=83)||(j>=98 && j<=107)||(j>=110 && j<=119)||(j>=134 && j<=143)||(j>=146 && j<=155)||(j>=170 && j<=179)||(j>=181 && j<=185)){
                    document.getElementById(j).style.backgroundColor = "grey";
                    if((j==localStorage.getItem("r1"))||(j==localStorage.getItem("r2"))||(j==localStorage.getItem("r3"))||(j==localStorage.getItem("r4"))||(j==localStorage.getItem("r5"))){
                      if(j!=destino){
                        document.getElementById(j).style.backgroundColor = "red";
                      }   
                    }
                  }
                  else if(j==180){
                    document.getElementById(j).style.backgroundColor = "green";
                  }
                  else{
                    document.getElementById(j).style.backgroundColor = "white";
                  }  
                }

                document.getElementById(cam[i]).style.backgroundColor = "red";
                i++
                //após percorrer todo o vetor, irá entrar nesse if, faznedo com que pare de executar o intervalo
                if(i==cam.length){
                  clearInterval(intervalo);
                }
                //a variável vel é a velocidade do intervalo, definida no início desse código
              }, vel);
            }            
            else{
              alert("Digite um valor válido!!!");
            }
          },
        },
      });
    </script>
  </body>
</html>
